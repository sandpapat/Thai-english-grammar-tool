{% extends "base.html" %}

{% block title %}{% if get_current_locale() == 'th' %}คู่มือ Tense - Thaislate{% else %}Tense Guide - Thaislate{% endif %}{% endblock %}

{% block extra_css %}
<style>
    /* Accordion Styling */
    .accordion {
        --bs-accordion-border-radius: 12px;
        --bs-accordion-border-color: var(--border-color);
        --bs-accordion-bg: var(--glass-bg);
        --bs-accordion-btn-bg: var(--glass-bg);
        --bs-accordion-btn-color: var(--text-primary);
        --bs-accordion-body-padding-x: 1.5rem;
        --bs-accordion-body-padding-y: 1.5rem;
    }
    
    .accordion-button {
        font-weight: 600;
        font-size: 1.1rem;
        border: none;
        background: var(--glass-bg) !important;
        backdrop-filter: var(--glass-backdrop);
        color: var(--text-primary) !important;
        transition: all 0.3s ease;
    }
    
    .accordion-button:not(.collapsed) {
        background: var(--card-bg) !important;
        box-shadow: none;
        border-bottom: 1px solid var(--border-color);
    }
    
    .accordion-button::after {
        transition: transform 0.3s ease;
    }
    
    .accordion-button:hover {
        background: var(--card-bg) !important;
        transform: translateY(-1px);
    }
    
    .accordion-body {
        background: var(--glass-bg);
        backdrop-filter: var(--glass-backdrop);
    }
    
    /* Tense Cards within Accordion */
    .tense-card {
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 10px;
        color: var(--text-primary);
        transition: all 0.3s ease;
        margin-bottom: 1rem;
    }
    
    .tense-card:hover {
        transform: translateY(-2px);
        background: var(--card-bg);
        border-color: var(--input-border-focus);
        box-shadow: var(--card-shadow-hover);
    }
    
    .tense-card-header {
        background: var(--glass-bg);
        border-bottom: 1px solid var(--border-color);
        color: var(--text-primary);
        padding: 1rem;
        border-radius: 9px 9px 0 0;
    }
    
    .tense-card-body {
        padding: 1rem;
    }
    
    .tense-list-item {
        background: var(--glass-bg);
        border-bottom: 1px solid var(--border-color);
        color: var(--text-primary);
        padding: 0.75rem;
        border-radius: 4px;
        margin-bottom: 0.5rem;
    }
    
    .tense-list-item:last-child {
        border-bottom: none;
        margin-bottom: 0;
    }
    
    .text-muted-custom {
        color: var(--text-secondary) !important;
    }
    
    /* Quick Navigation */
    .tense-nav {
        background: var(--glass-bg);
        backdrop-filter: var(--glass-backdrop);
        border-radius: 12px;
        padding: 1.5rem;
        margin-bottom: 2rem;
        border: 1px solid var(--glass-border);
    }
    
    .tense-nav-item {
        display: inline-block;
        margin: 0.25rem;
        padding: 0.5rem 1rem;
        background: var(--glass-bg);
        border: 1px solid var(--glass-border);
        border-radius: 20px;
        color: var(--text-primary);
        text-decoration: none;
        font-size: 0.9rem;
        transition: all 0.3s ease;
    }
    
    .tense-nav-item:hover {
        background: var(--card-bg);
        color: var(--text-primary);
        text-decoration: none;
        transform: translateY(-2px);
        box-shadow: var(--card-shadow);
    }
    
    /* Color-coded badges */
    .badge-formula {
        font-size: 0.8rem;
        padding: 0.5rem 1rem;
        border-radius: 15px;
        font-weight: 500;
    }
    
    /* Ensure proper subscript rendering */
    .badge-formula sub {
        font-size: 0.65em;
        vertical-align: baseline;
        position: relative;
        top: 0.3em;
    }
    
    /* Back to top button */
    .back-to-top {
        position: fixed;
        bottom: 30px;
        right: 30px;
        background: var(--button-primary);
        color: white;
        border: none;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        font-size: 1.2rem;
        box-shadow: var(--button-shadow);
        transition: all 0.3s ease;
        opacity: 0;
        visibility: hidden;
        z-index: 1000;
    }
    
    .back-to-top.show {
        opacity: 1;
        visibility: visible;
    }
    
    .back-to-top:hover {
        background: var(--button-primary-hover);
        transform: translateY(-3px);
    }
    
    /* Mobile optimizations */
    @media (max-width: 768px) {
        .tense-nav-item {
            display: block;
            margin: 0.5rem 0;
            text-align: center;
        }
        
        .accordion-button {
            font-size: 1rem;
        }
        
        .back-to-top {
            bottom: 20px;
            right: 20px;
            width: 45px;
            height: 45px;
        }
    }
    
    /* Smooth scroll behavior */
    html {
        scroll-behavior: smooth;
    }
</style>
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <!-- Header -->
        <div class="text-center mb-5" id="top">
            <h1 class="mb-3">
                <i class="bi bi-book"></i> 
                {% if get_current_locale() == 'th' %}
                    <span lang="th">คู่มือการใช้ Tense ภาษาอังกฤษ</span>
                {% else %}
                    English Tense Usage Guide
                {% endif %}
            </h1>
            <p class="text-muted-custom mb-4">
                {% if get_current_locale() == 'th' %}
                    <span lang="th">ความเข้าใจการใช้ Tense ภาษาอังกฤษที่แตกต่างกันสำหรับการแปลไทย-อังกฤษ</span>
                {% else %}
                    Understanding different English tense usages for Thai-English translation
                {% endif %}
            </p>
        </div>

        <!-- Quick Navigation -->
        <div class="tense-nav text-center">
            <h5 class="mb-3"><i class="bi bi-compass"></i> {% if get_current_locale() == 'th' %}เมนูด่วน{% else %}Quick Navigation{% endif %}</h5>
            <div class="d-flex flex-wrap justify-content-center">
                <a href="#present-section" class="tense-nav-item">
                    <i class="bi bi-clock me-1"></i>{% if get_current_locale() == 'th' %}Present Tenses{% else %}Present Tenses{% endif %}
                </a>
                <a href="#past-section" class="tense-nav-item">
                    <i class="bi bi-clock-history me-1"></i>{% if get_current_locale() == 'th' %}Past Tenses{% else %}Past Tenses{% endif %}
                </a>
                <a href="#future-section" class="tense-nav-item">
                    <i class="bi bi-clock-forward me-1"></i>{% if get_current_locale() == 'th' %}Future Tenses{% else %}Future Tenses{% endif %}
                </a>
            </div>
        </div>

        <!-- Main Accordion -->
        <div class="accordion" id="tenseAccordion">
            
            <!-- Present Tenses Section -->
            <div class="accordion-item" id="present-section">
                <h2 class="accordion-header">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" 
                            data-bs-target="#collapsePresent" aria-expanded="true" aria-controls="collapsePresent">
                        <i class="bi bi-clock me-2"></i>
                        <strong>{% if get_current_locale() == 'th' %}Present Tenses (ปัจจุบัน){% else %}Present Tenses{% endif %}</strong>
                        <span class="badge bg-primary ms-2">{% if get_current_locale() == 'th' %}4 Tenses{% else %}4 Tenses{% endif %}</span>
                    </button>
                </h2>
                <div id="collapsePresent" class="accordion-collapse collapse show" data-bs-parent="#tenseAccordion">
                    <div class="accordion-body">
                        <!-- Present Tenses Sub-Accordion -->
                        <div class="accordion" id="presentAccordion">
                            
                            <!-- Present Simple -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                                            data-bs-target="#presentSimple" aria-expanded="false" aria-controls="presentSimple">
                                        <span class="text-primary me-2">Present Simple</span>
                                        <span class="badge badge-formula bg-primary">Subject + V<sub>1</sub> (s/es)</span>
                                    </button>
                                </h2>
                                <div id="presentSimple" class="accordion-collapse collapse" data-bs-parent="#presentAccordion">
                                    <div class="accordion-body">
                                        <div class="tense-card">
                                            <div class="tense-card-body">
                                                <div class="tense-list-item">
                                                    <strong>
                                                        {% if get_current_locale() == 'th' %}
                                                            <span lang="th">กิจวัตรและพฤติกรรมประจำ:</span>
                                                        {% else %}
                                                            Routines and Habits:
                                                        {% endif %}
                                                    </strong><br>
                                                    <small class="text-muted-custom">
                                                        {% if get_current_locale() == 'th' %}
                                                            <span lang="th">ใช้เมื่อพูดถึงกิจวัตรหรือพฤติกรรมที่ทำเป็นประจำ</span>
                                                        {% else %}
                                                            Used for routines or behaviors done regularly
                                                        {% endif %}
                                                    </small>
                                                </div>
                                                <div class="tense-list-item">
                                                    <strong>
                                                        {% if get_current_locale() == 'th' %}
                                                            ข้อเท็จจริงและความรู้วิทยาศาสตร์:
                                                        {% else %}
                                                            Facts and Scientific Knowledge:
                                                        {% endif %}
                                                    </strong><br>
                                                    <small class="text-muted-custom">
                                                        {% if get_current_locale() == 'th' %}
                                                            ใช้กับข้อเท็จจริงที่เป็นสัจธรรมหรือเป็นความรู้ทางวิทยาศาสตร์
                                                        {% else %}
                                                            Used for universal facts or scientific knowledge
                                                        {% endif %}
                                                    </small>
                                                </div>
                                                <div class="tense-list-item">
                                                    <strong>
                                                        {% if get_current_locale() == 'th' %}
                                                            ตารางเวลาและแผนการ:
                                                        {% else %}
                                                            Schedules and Plans:
                                                        {% endif %}
                                                    </strong><br>
                                                    <small class="text-muted-custom">
                                                        {% if get_current_locale() == 'th' %}
                                                            ใช้เมื่อกล่าวถึงตารางเวลา เช่น ตารางเดินรถ หรือแผนที่กำหนดไว้
                                                        {% else %}
                                                            Used for schedules like train timetables or fixed plans
                                                        {% endif %}
                                                    </small>
                                                </div>
                                                <div class="tense-list-item">
                                                    <strong>
                                                        {% if get_current_locale() == 'th' %}
                                                            สุภาษิตและคำกล่าวทั่วไป:
                                                        {% else %}
                                                            Proverbs and General Statements:
                                                        {% endif %}
                                                    </strong><br>
                                                    <small class="text-muted-custom">
                                                        {% if get_current_locale() == 'th' %}
                                                            ใช้กับสุภาษิต คำพังเพย หรือคำกล่าวทั่วไป
                                                        {% else %}
                                                            Used for proverbs, sayings, or general statements
                                                        {% endif %}
                                                    </small>
                                                </div>
                                                <div class="tense-list-item">
                                                    <strong>
                                                        {% if get_current_locale() == 'th' %}
                                                            พาดหัวข่าว:
                                                        {% else %}
                                                            News Headlines:
                                                        {% endif %}
                                                    </strong><br>
                                                    <small class="text-muted-custom">
                                                        {% if get_current_locale() == 'th' %}
                                                            ใช้ในพาดหัวข่าวหรือข้อความที่เน้นย่อประโยค สังเกตว่าแม้จะพูดถึงเหตุการณ์ที่เกิดขึ้นแล้ว แต่พาดหัวข่าวมักใช้ Present Simple เพื่อสร้างความรู้สึกสดใหม่และดึงดูดความสนใจผู้อ่าน
                                                        {% else %}
                                                            Used in news headlines for brevity. Even when referring to past events, headlines often use Present Simple to create a sense of immediacy and grab reader attention
                                                        {% endif %}
                                                    </small>
                                                </div>
                                                <div class="tense-list-item">
                                                    <strong>
                                                        {% if get_current_locale() == 'th' %}
                                                            แผนการและความตั้งใจในอนาคต:
                                                        {% else %}
                                                            Future Plans and Intentions:
                                                        {% endif %}
                                                    </strong><br>
                                                    <small class="text-muted-custom">
                                                        {% if get_current_locale() == 'th' %}
                                                            ใช้เมื่อพูดถึง "แผนการ" หรือ "ความตั้งใจ" ในอนาคต แม้ว่าโครงสร้างจะใช้ Present Simple แต่ความหมายมักชี้ไปยังสิ่งที่ผู้พูดหรือผู้ถูกถาม "ตั้งใจจะทำ" ในอนาคต
                                                        {% else %}
                                                            Used when discussing "plans" or "intentions" for the future. Although using Present Simple structure, the meaning often points to what the speaker or subject "intends to do" in the future
                                                        {% endif %}
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Present Continuous -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                                            data-bs-target="#presentContinuous" aria-expanded="false" aria-controls="presentContinuous">
                                        <span class="text-success me-2">Present Continuous</span>
                                        <span class="badge badge-formula bg-success">Subject + am/is/are + V<sub>ing</sub></span>
                                    </button>
                                </h2>
                                <div id="presentContinuous" class="accordion-collapse collapse" data-bs-parent="#presentAccordion">
                                    <div class="accordion-body">
                                        <div class="tense-card">
                                            <div class="tense-card-body">
                                                <div class="tense-list-item">
                                                    <strong>
                                                        {% if get_current_locale() == 'th' %}
                                                            การกระทำที่เกิดขึ้นขณะพูด:
                                                        {% else %}
                                                            Actions Happening While Speaking:
                                                        {% endif %}
                                                    </strong><br>
                                                    <small class="text-muted-custom">
                                                        {% if get_current_locale() == 'th' %}
                                                            สิ่งที่ทำอยู่ขณะพูด
                                                        {% else %}
                                                            Things being done at the moment of speaking
                                                        {% endif %}
                                                    </small>
                                                </div>
                                                <div class="tense-list-item">
                                                    <strong>
                                                        {% if get_current_locale() == 'th' %}
                                                            กิจกรรมในช่วงเวลานี้:
                                                        {% else %}
                                                            Activities During This Period:
                                                        {% endif %}
                                                    </strong><br>
                                                    <small class="text-muted-custom">
                                                        {% if get_current_locale() == 'th' %}
                                                            สิ่งที่ทำอยู่ในช่วงนี้ เช่น โปรเจค หรือ สิ่งที่ใช้เวลาทำนาน เป็นหลักวัน
                                                        {% else %}
                                                            Things being done during this time period, such as projects or long-term activities that take days
                                                        {% endif %}
                                                    </small>
                                                </div>
                                                <div class="tense-list-item">
                                                    <strong>
                                                        {% if get_current_locale() == 'th' %}
                                                            เหตุการณ์ในอนาคตที่วางแผนแล้ว:
                                                        {% else %}
                                                            Future Events Already Planned:
                                                        {% endif %}
                                                    </strong><br>
                                                    <small class="text-muted-custom">
                                                        {% if get_current_locale() == 'th' %}
                                                            เหตุการณ์ที่จะเกิดขึ้นในอนาคตโดยมี "การวางแผนไว้แล้ว" โดยมักจะเจอ "v.to be + going to"
                                                        {% else %}
                                                            Events that will happen in the future with "planning already done", often seen with "v.to be + going to"
                                                        {% endif %}
                                                    </small>
                                                </div>
                                                <div class="tense-list-item">
                                                    <strong>
                                                        {% if get_current_locale() == 'th' %}
                                                            การเปลี่ยนแปลงที่กำลังดำเนินอยู่:
                                                        {% else %}
                                                            Ongoing Changes:
                                                        {% endif %}
                                                    </strong><br>
                                                    <small class="text-muted-custom">
                                                        {% if get_current_locale() == 'th' %}
                                                            เหตุการณ์ที่กำลังมีการเปลี่ยนแปลง พัฒนาขึ้น หรือก้าวหน้าขึ้น
                                                        {% else %}
                                                            Events that are currently changing, developing, or progressing
                                                        {% endif %}
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Present Perfect -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                                            data-bs-target="#presentPerfect" aria-expanded="false" aria-controls="presentPerfect">
                                        <span class="text-info me-2">Present Perfect</span>
                                        <span class="badge badge-formula bg-info">Subject + have/has + V<sub>3</sub></span>
                                    </button>
                                </h2>
                                <div id="presentPerfect" class="accordion-collapse collapse" data-bs-parent="#presentAccordion">
                                    <div class="accordion-body">
                                        <div class="tense-card">
                                            <div class="tense-card-body">
                                                <div class="tense-list-item">
                                                    <strong>
                                                        {% if get_current_locale() == 'th' %}
                                                            การกระทำที่เพิ่งสิ้นสุด:
                                                        {% else %}
                                                            Actions Just Completed:
                                                        {% endif %}
                                                    </strong><br>
                                                    <small class="text-muted-custom">
                                                        {% if get_current_locale() == 'th' %}
                                                            ใช้เมื่อเหตุการณ์เพิ่งจะสิ้นสุดลง
                                                        {% else %}
                                                            Used when events have just ended
                                                        {% endif %}
                                                    </small>
                                                </div>
                                                <div class="tense-list-item">
                                                    <strong>
                                                        {% if get_current_locale() == 'th' %}
                                                            การกระทำในอดีตที่มีผลต่อปัจจุบัน:
                                                        {% else %}
                                                            Past Actions Affecting Present:
                                                        {% endif %}
                                                    </strong><br>
                                                    <small class="text-muted-custom">
                                                        {% if get_current_locale() == 'th' %}
                                                            สิ่งที่เกิดขึ้นตั้งแต่อดีตและมีผลหรือคงสภาพจนถึงปัจจุบัน (การกระทำอาจจะจบไปแล้ว)
                                                        {% else %}
                                                            Things that happened since the past and have effects or continue to the present (the action may be completed)
                                                        {% endif %}
                                                    </small>
                                                </div>
                                                <div class="tense-list-item">
                                                    <strong>
                                                        {% if get_current_locale() == 'th' %}
                                                            ประสบการณ์:
                                                        {% else %}
                                                            Experience:
                                                        {% endif %}
                                                    </strong><br>
                                                    <small class="text-muted-custom">
                                                        {% if get_current_locale() == 'th' %}
                                                            ประสบการณ์ (เจอคำว่า "First / ... time")
                                                        {% else %}
                                                            Experience (often with "First / ... time")
                                                        {% endif %}
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Present Perfect Continuous -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                                            data-bs-target="#presentPerfectCont" aria-expanded="false" aria-controls="presentPerfectCont">
                                        <span class="text-warning me-2">Present Perfect Continuous</span>
                                        <span class="badge badge-formula bg-warning text-dark">Subject + have/has + been + V<sub>ing</sub></span>
                                    </button>
                                </h2>
                                <div id="presentPerfectCont" class="accordion-collapse collapse" data-bs-parent="#presentAccordion">
                                    <div class="accordion-body">
                                        <div class="tense-card">
                                            <div class="tense-card-body">
                                                <div class="tense-list-item">
                                                    <strong>
                                                        {% if get_current_locale() == 'th' %}
                                                            การกระทำต่อเนื่องจากอดีตถึงปัจจุบัน:
                                                        {% else %}
                                                            Continuous Actions from Past to Present:
                                                        {% endif %}
                                                    </strong><br>
                                                    <small class="text-muted-custom">
                                                        {% if get_current_locale() == 'th' %}
                                                            สิ่งที่ทำเรื่อยมาจนถึงปัจจุบัน โดยเน้น ระยะเวลา มักเจอ For since
                                                        {% else %}
                                                            Actions that have been ongoing from the past until now, emphasizing duration, often with "for" or "since"
                                                        {% endif %}
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Past Tenses Section -->
            <div class="accordion-item" id="past-section">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                            data-bs-target="#collapsePast" aria-expanded="false" aria-controls="collapsePast">
                        <i class="bi bi-clock-history me-2"></i>
                        <strong>{% if get_current_locale() == 'th' %}Past Tenses (อดีต){% else %}Past Tenses{% endif %}</strong>
                        <span class="badge bg-secondary ms-2">{% if get_current_locale() == 'th' %}4 Tenses{% else %}4 Tenses{% endif %}</span>
                    </button>
                </h2>
                <div id="collapsePast" class="accordion-collapse collapse" data-bs-parent="#tenseAccordion">
                    <div class="accordion-body">
                        <!-- Past Tenses Sub-Accordion -->
                        <div class="accordion" id="pastAccordion">
                            
                            <!-- Past Simple -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                                            data-bs-target="#pastSimple" aria-expanded="false" aria-controls="pastSimple">
                                        <span class="text-secondary me-2">Past Simple</span>
                                        <span class="badge badge-formula bg-secondary">Subject + V<sub>2</sub></span>
                                    </button>
                                </h2>
                                <div id="pastSimple" class="accordion-collapse collapse" data-bs-parent="#pastAccordion">
                                    <div class="accordion-body">
                                        <div class="tense-card">
                                            <div class="tense-card-body">
                                                <div class="tense-list-item">
                                                    <strong>
                                                        {% if get_current_locale() == 'th' %}
                                                            การกระทำในอดีตทั่วไป:
                                                        {% else %}
                                                            General Past Actions:
                                                        {% endif %}
                                                    </strong><br>
                                                    <small class="text-muted-custom">
                                                        {% if get_current_locale() == 'th' %}
                                                            การกระทำในอดีตทั่วไป โดยไม่มีบริบทหรือรายละเอียดเพิ่มเติม
                                                        {% else %}
                                                            General actions in the past without additional context or details
                                                        {% endif %}
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Past Continuous -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                                            data-bs-target="#pastContinuous" aria-expanded="false" aria-controls="pastContinuous">
                                        <span class="text-dark me-2">Past Continuous</span>
                                        <span class="badge badge-formula bg-dark">Subject + was/were + V<sub>ing</sub></span>
                                    </button>
                                </h2>
                                <div id="pastContinuous" class="accordion-collapse collapse" data-bs-parent="#pastAccordion">
                                    <div class="accordion-body">
                                        <div class="tense-card">
                                            <div class="tense-card-body">
                                                <div class="tense-list-item">
                                                    <strong>
                                                        {% if get_current_locale() == 'th' %}
                                                            การกระทำที่ถูกขัดจังหวะ:
                                                        {% else %}
                                                            Interrupted Actions:
                                                        {% endif %}
                                                    </strong><br>
                                                    <small class="text-muted-custom">
                                                        {% if get_current_locale() == 'th' %}
                                                            ใช้คู่กับ Past Simple เพื่อบอกว่าเหตุการณ์ใน Past simple เกิด "แทรก" อีกเหตุการณ์ที่กำลังทำในอดีต
                                                        {% else %}
                                                            Used with Past Simple to show that a Past Simple event "interrupted" another ongoing action in the past
                                                        {% endif %}
                                                    </small>
                                                </div>
                                                <div class="tense-list-item">
                                                    <strong>
                                                        {% if get_current_locale() == 'th' %}
                                                            การกระทำ ณ เวลาหนึ่งในอดีต:
                                                        {% else %}
                                                            Actions at a Specific Time in the Past:
                                                        {% endif %}
                                                    </strong><br>
                                                    <small class="text-muted-custom">
                                                        {% if get_current_locale() == 'th' %}
                                                            สิ่งที่กำลังทำอยู่ ณ เวลาหนึ่งในอดีต
                                                        {% else %}
                                                            Things that were being done at a specific time in the past
                                                        {% endif %}
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Past Perfect -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                                            data-bs-target="#pastPerfect" aria-expanded="false" aria-controls="pastPerfect">
                                        <span class="text-danger me-2">Past Perfect</span>
                                        <span class="badge badge-formula bg-danger">Subject + had + V<sub>3</sub></span>
                                    </button>
                                </h2>
                                <div id="pastPerfect" class="accordion-collapse collapse" data-bs-parent="#pastAccordion">
                                    <div class="accordion-body">
                                        <div class="tense-card">
                                            <div class="tense-card-body">
                                                <div class="tense-list-item">
                                                    <strong>
                                                        {% if get_current_locale() == 'th' %}
                                                            การกระทำที่เกิดก่อนเหตุการณ์อื่นในอดีต:
                                                        {% else %}
                                                            Actions That Occurred Before Other Past Events:
                                                        {% endif %}
                                                    </strong><br>
                                                    <small class="text-muted-custom">
                                                        {% if get_current_locale() == 'th' %}
                                                            ใช้เมื่อต้องการแสดงว่าเหตุการณ์หนึ่งเกิดขึ้นและเสร็จก่อนอีกเหตุการณ์ในอดีต (เช่น Past Simple หรือ ตัวบอกเวลาในอดีต) เช่นในประโยคนี้ "เธอทำการบ้านเสร็จก่อนที่จะทานข้าวเย็น"
                                                        {% else %}
                                                            Used to show that one event occurred and was completed before another past event (such as Past Simple or past time markers). For example: "She had finished her homework before she ate dinner"
                                                        {% endif %}
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Past Perfect Continuous -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                                            data-bs-target="#pastPerfectCont" aria-expanded="false" aria-controls="pastPerfectCont">
                                        <span class="text-primary me-2">Past Perfect Continuous</span>
                                        <span class="badge badge-formula bg-primary">Subject + had + been + V<sub>ing</sub></span>
                                    </button>
                                </h2>
                                <div id="pastPerfectCont" class="accordion-collapse collapse" data-bs-parent="#pastAccordion">
                                    <div class="accordion-body">
                                        <div class="tense-card">
                                            <div class="tense-card-body">
                                                <div class="tense-list-item">
                                                    <strong>
                                                        {% if get_current_locale() == 'th' %}
                                                            การกระทำต่อเนื่องก่อนเหตุการณ์ในอดีต:
                                                        {% else %}
                                                            Continuous Actions Before Past Events:
                                                        {% endif %}
                                                    </strong><br>
                                                    <small class="text-muted-custom">
                                                        {% if get_current_locale() == 'th' %}
                                                            ใช้คู่กับ Past Simple หรือ ตัวบอกเวลาในอดีต เพื่อบอกสิ่งที่กำลังทำอยู่สักพักหนึ่งก่อนอีกสิ่งจะเกิดในอดีต (เน้นว่ากำลังทำอยู่ตอนนั้น)
                                                        {% else %}
                                                            Used with Past Simple or past time markers to show what was being done for a while before another past event occurred (emphasizing the ongoing nature at that time)
                                                        {% endif %}
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Future Tenses Section -->
            <div class="accordion-item" id="future-section">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                            data-bs-target="#collapseFuture" aria-expanded="false" aria-controls="collapseFuture">
                        <i class="bi bi-clock-forward me-2"></i>
                        <strong>{% if get_current_locale() == 'th' %}Future Tenses (อนาคต){% else %}Future Tenses{% endif %}</strong>
                        <span class="badge bg-success ms-2">{% if get_current_locale() == 'th' %}4 Tenses{% else %}4 Tenses{% endif %}</span>
                    </button>
                </h2>
                <div id="collapseFuture" class="accordion-collapse collapse" data-bs-parent="#tenseAccordion">
                    <div class="accordion-body">
                        <!-- Future Tenses Sub-Accordion -->
                        <div class="accordion" id="futureAccordion">
                            
                            <!-- Future Simple -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                                            data-bs-target="#futureSimple" aria-expanded="false" aria-controls="futureSimple">
                                        <span class="text-success me-2">Future Simple</span>
                                        <span class="badge badge-formula bg-success">Subject + will + V<sub>inf</sub></span>
                                    </button>
                                </h2>
                                <div id="futureSimple" class="accordion-collapse collapse" data-bs-parent="#futureAccordion">
                                    <div class="accordion-body">
                                        <div class="tense-card">
                                            <div class="tense-card-body">
                                                <div class="tense-list-item">
                                                    <strong>
                                                        {% if get_current_locale() == 'th' %}
                                                            การคาดการณ์ (50% ความเป็นไปได้):
                                                        {% else %}
                                                            Predictions (50% Probability):
                                                        {% endif %}
                                                    </strong><br>
                                                    <small class="text-muted-custom">
                                                        {% if get_current_locale() == 'th' %}
                                                            สิ่งที่คาดจะเกิด หรือมีแนวโน้มในอนาคต (50%)
                                                        {% else %}
                                                            Things that are expected to happen or have tendencies in the future (50% probability)
                                                        {% endif %}
                                                    </small>
                                                </div>
                                                <div class="tense-list-item">
                                                    <strong>
                                                        {% if get_current_locale() == 'th' %}
                                                            คำสัญญาและการเสนอความช่วยเหลือ:
                                                        {% else %}
                                                            Promises and Offers of Help:
                                                        {% endif %}
                                                    </strong><br>
                                                    <small class="text-muted-custom">
                                                        {% if get_current_locale() == 'th' %}
                                                            การให้คำสัญญา หรือเสนออะไรให้ใคร (promise)
                                                        {% else %}
                                                            Making promises or offering something to someone
                                                        {% endif %}
                                                    </small>
                                                </div>
                                                <div class="tense-list-item">
                                                    <strong>
                                                        {% if get_current_locale() == 'th' %}
                                                            การตัดสินใจฉับพลัน:
                                                        {% else %}
                                                            Spontaneous Decisions:
                                                        {% endif %}
                                                    </strong><br>
                                                    <small class="text-muted-custom">
                                                        {% if get_current_locale() == 'th' %}
                                                            สิ่งที่เพิ่งคิดว่าจะทำเดี๋ยวนั้น (ไม่ได้วางแผนว่าจะทำมาก่อน)
                                                        {% else %}
                                                            Things you just decided to do right now (not planned beforehand)
                                                        {% endif %}
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Future Continuous -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                                            data-bs-target="#futureContinuous" aria-expanded="false" aria-controls="futureContinuous">
                                        <span class="text-info me-2">Future Continuous</span>
                                        <span class="badge badge-formula bg-info">Subject + will + be + V<sub>ing</sub></span>
                                    </button>
                                </h2>
                                <div id="futureContinuous" class="accordion-collapse collapse" data-bs-parent="#futureAccordion">
                                    <div class="accordion-body">
                                        <div class="tense-card">
                                            <div class="tense-card-body">
                                                <div class="tense-list-item">
                                                    <strong>
                                                        {% if get_current_locale() == 'th' %}
                                                            การกระทำในอนาคตที่ยาวนาน:
                                                        {% else %}
                                                            Long-Duration Future Actions:
                                                        {% endif %}
                                                    </strong><br>
                                                    <small class="text-muted-custom">
                                                        {% if get_current_locale() == 'th' %}
                                                            สิ่งที่คาดว่าน่าจะเกิดขึ้น คงจะทำอยู่ หรือวางแผนว่าจะทำ ณ เวลาหนึ่งในอนาคต
                                                        {% else %}
                                                            Things expected to happen, likely to be done, or planned to be done at a specific time in the future
                                                        {% endif %}
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Future Perfect -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                                            data-bs-target="#futurePerfect" aria-expanded="false" aria-controls="futurePerfect">
                                        <span class="text-warning me-2">Future Perfect</span>
                                        <span class="badge badge-formula bg-warning text-dark">Subject + will + have + V<sub>3</sub></span>
                                    </button>
                                </h2>
                                <div id="futurePerfect" class="accordion-collapse collapse" data-bs-parent="#futureAccordion">
                                    <div class="accordion-body">
                                        <div class="tense-card">
                                            <div class="tense-card-body">
                                                <div class="tense-list-item">
                                                    <strong>
                                                        {% if get_current_locale() == 'th' %}
                                                            การกระทำที่จะเสร็จสิ้นในอนาคต:
                                                        {% else %}
                                                            Actions That Will Be Completed in the Future:
                                                        {% endif %}
                                                    </strong><br>
                                                    <small class="text-muted-custom">
                                                        {% if get_current_locale() == 'th' %}
                                                            สิ่งที่คาดว่าคงจบ เสร็จสิ้น หรือครบเวลาแล้ว ณ เวลาหนึ่งในอนาคต
                                                        {% else %}
                                                            Things expected to be finished, completed, or time-expired at a specific time in the future
                                                        {% endif %}
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Future Perfect Continuous -->
                            <div class="accordion-item">
                                <h2 class="accordion-header">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                                            data-bs-target="#futurePerfectCont" aria-expanded="false" aria-controls="futurePerfectCont">
                                        <span class="text-danger me-2">Future Perfect Continuous</span>
                                        <span class="badge badge-formula bg-danger">Subject + will + have + been + V<sub>ing</sub></span>
                                    </button>
                                </h2>
                                <div id="futurePerfectCont" class="accordion-collapse collapse" data-bs-parent="#futureAccordion">
                                    <div class="accordion-body">
                                        <div class="tense-card">
                                            <div class="tense-card-body">
                                                <div class="tense-list-item">
                                                    <strong>
                                                        {% if get_current_locale() == 'th' %}
                                                            การกระทำที่จะเสร็จและต่อเนื่องในอนาคต:
                                                        {% else %}
                                                            Actions That Will Be Completed and Continuing in the Future:
                                                        {% endif %}
                                                    </strong><br>
                                                    <small class="text-muted-custom">
                                                        {% if get_current_locale() == 'th' %}
                                                            สิ่งที่คาดว่าคงจบ เสร็จสิ้น หรือครบเวลาแล้ว ณ เวลาหนึ่งในอนาคต และจะคงสภาพหรือทำแบบนี้ต่อไปอีก
                                                        {% else %}
                                                            Things expected to be finished, completed, or time-expired at a specific time in the future and will continue in that state or continue doing so
                                                        {% endif %}
                                                    </small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Usage Note -->
        <div class="alert alert-info mt-4">
            <h5><i class="bi bi-info-circle"></i> 
                {% if get_current_locale() == 'th' %}
                    หมายเหตุสำหรับการแปลไทย-อังกฤษ
                {% else %}
                    Notes for Thai-English Translation
                {% endif %}
            </h5>
            <p class="mb-0">
                {% if get_current_locale() == 'th' %}
                    เนื่องจากกริยาภาษาไทยไม่เปลี่ยนรูปเพื่อแสดง Tense ดังนั้น Tense ในภาษาอังกฤษจึงต้องอนุมานจากบริบท เช่น คำบอกเวลา 
                    อนุภาค (เช่น จะ สำหรับอนาคต) และบริบทของสถานการณ์ ระบบการจำแนกประเภทนี้ช่วยระบุ Tense ภาษาอังกฤษที่เหมาะสมที่สุด
                    โดยอิงจากความหมายและบริบทของประโยคภาษาไทย
                {% else %}
                    Since Thai verbs don't conjugate to show tense, English tenses must be inferred from context, such as time markers, 
                    particles (like จะ for future), and situational context. This classification system helps identify the most appropriate English tense 
                    based on the meaning and context of the Thai sentence.
                {% endif %}
            </p>
        </div>
    </div>
</div>

<!-- Back to Top Button -->
<button class="back-to-top" onclick="scrollToTop()" title="Back to top">
    <i class="bi bi-arrow-up"></i>
</button>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Back to top button functionality
    const backToTopButton = document.querySelector('.back-to-top');
    
    window.addEventListener('scroll', function() {
        if (window.pageYOffset > 300) {
            backToTopButton.classList.add('show');
        } else {
            backToTopButton.classList.remove('show');
        }
    });
    
    // Smooth scroll to anchor links
    const navLinks = document.querySelectorAll('.tense-nav-item');
    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            const targetElement = document.querySelector(targetId);
            
            if (targetElement) {
                // Open the accordion section if it's collapsed
                const accordionButton = targetElement.querySelector('.accordion-button');
                if (accordionButton && accordionButton.classList.contains('collapsed')) {
                    accordionButton.click();
                }
                
                // Smooth scroll with offset
                setTimeout(() => {
                    const elementPosition = targetElement.getBoundingClientRect().top + window.pageYOffset;
                    const offsetPosition = elementPosition - 100;
                    
                    window.scrollTo({
                        top: offsetPosition,
                        behavior: 'smooth'
                    });
                }, 300);
            }
        });
    });
});

function scrollToTop() {
    window.scrollTo({
        top: 0,
        behavior: 'smooth'
    });
}
</script>
{% endblock %}